# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –µ–∫—Å–ø–æ—Ä—Ç—É CV - –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º—ñ–≥ —Å–∫–∞—á–∞—Ç–∏ CV —É —Ñ–æ—Ä–º–∞—Ç—ñ PDF –∞–±–æ DOCX - —Ñ–∞–π–ª–∏ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞–ª–∏—Å—å –Ω–∞ –∫–æ–º–ø'—é—Ç–µ—Ä.

## –ó–Ω–∞–π–¥–µ–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏

### 1. ‚ùå –ü–æ–º–∏–ª–∫–∞ –≤ Django —à–∞–±–ª–æ–Ω—ñ (clean.html)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `{{ exp.position|default:exp.title }}` –≤–∏–∫–ª–∏–∫–∞–ª–æ –ø–æ–º–∏–ª–∫—É, –∫–æ–ª–∏ –ø–æ–ª–µ `title` –Ω–µ —ñ—Å–Ω—É–≤–∞–ª–æ –≤ —Å–ª–æ–≤–Ω–∏–∫—É.

**–ü–æ–º–∏–ª–∫–∞:**
```
VariableDoesNotExist: Failed lookup for key [title] in {'position': '...', 'company': '...'}
```

**–ü—Ä–∏—á–∏–Ω–∞:** Django template filter `|default:` –Ω–µ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É, —è–∫–∞ –Ω–µ —ñ—Å–Ω—É—î –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ, —è–∫ fallback –∑–Ω–∞—á–µ–Ω–Ω—è.

### 2. ‚ö†Ô∏è –ù–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –¥–∞–Ω–∏—Ö
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–≤:
- `position` (–Ω–µ `title`)
- `start_date/end_date` (–Ω–µ `start/end`)
- `name` –¥–ª—è projects (–Ω–µ `title`)
- `technologies` —è–∫ –º–∞—Å–∏–≤ (–Ω–µ `tech` —è–∫ —Ä—è–¥–æ–∫)

## –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ HTML —à–∞–±–ª–æ–Ω (clean.html)

**–î–æ:**
```django
<h3 class="entry-title">{{ exp.position|default:exp.title }}</h3>
```

**–ü—ñ—Å–ª—è:**
```django
<h3 class="entry-title">{% firstof exp.position exp.title "Position" %}</h3>
```

**–ü–µ—Ä–µ–≤–∞–≥–∏ `firstof`:**
- –ë–µ–∑–ø–µ—á–Ω–æ –æ–±—Ä–æ–±–ª—è—î –Ω–µ—ñ—Å–Ω—É—é—á—ñ –∑–º—ñ–Ω–Ω—ñ
- –ü–æ–≤–µ—Ä—Ç–∞—î –ø–µ—Ä—à–µ –Ω–µ-–ø—É—Å—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è
- –ú–æ–∂–µ –º–∞—Ç–∏ fallback –∑–Ω–∞—á–µ–Ω–Ω—è

### 2. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ experience —Å–µ–∫—Ü—ñ—é
```django
{% firstof exp.position exp.title "Position" %}
{% firstof exp.start_date exp.start "" %} - {% firstof exp.end_date exp.end "" %}
```

### 3. ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ projects —Å–µ–∫—Ü—ñ—é
```django
{% firstof project.name project.title "Project" %}
```

### 4. ‚úÖ –î–æ–¥–∞–Ω–æ —è–≤–Ω–∏–π Content-Disposition header

**views.py:**
```python
response['Content-Disposition'] = f'attachment; filename="{filename}"'
```

–¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –±—Ä–∞—É–∑–µ—Ä –æ—Ç—Ä–∏–º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–µ —ñ–º'—è —Ñ–∞–π–ª—É.

### 5. ‚úÖ –î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è

**CVExportButtons.tsx:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—á–∞—Ç–∫—É –µ–∫—Å–ø–æ—Ä—Ç—É
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö (—Ä–æ–∑–º—ñ—Ä blob, filename)
- –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è URL —ñ —Ç—Ä–∏–≥–µ—Ä–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫

**api.ts:**
- –õ–æ–≥—É–≤–∞–Ω–Ω—è URL –∑–∞–ø–∏—Ç—É
- –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—É —ñ —Ç–∏–ø—É blob
- –õ–æ–≥—É–≤–∞–Ω–Ω—è Content-Disposition header
- –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ filename

## –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### ‚úÖ Backend —Ç–µ—Å—Ç–∏ (Django shell)

**Mock CV:**
```
‚úÖ PDF Export successful: Test_CV_20251108.pdf
   Size: 6271 bytes
‚úÖ DOCX Export successful: Test_CV_20251108.docx
   Size: 36870 bytes
```

**Real CV –∑ –±–∞–∑–∏:**
```
‚úÖ PDF Export successful: My_CV_20251108.pdf
   Size: 6271 bytes
‚úÖ DOCX Export successful: My_CV_20251108.docx
   Size: 36681 bytes
```

## –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

### Backend:
1. ‚úÖ `backend/profiles/templates/cv/clean.html` - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —à–∞–±–ª–æ–Ω
2. ‚úÖ `backend/profiles/views.py` - –¥–æ–¥–∞–Ω–æ Content-Disposition header
3. ‚úÖ `backend/profiles/services/cv_export_service.py` - –≤–∂–µ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω—ñ—à–µ

### Frontend:
1. ‚úÖ `frontend/src/components/cv/CVExportButtons.tsx` - –¥–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è
2. ‚úÖ `frontend/src/services/api.ts` - –¥–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è

## –Ø–∫ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ backend:
```bash
cd backend
python manage.py runserver
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ frontend:
```bash
cd frontend
npm run dev
```

### 3. –°—Ç–≤–æ—Ä–∏—Ç–∏/—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ CV:
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/cv-master`
2. –ó–∞–ø–æ–≤–Ω–∏—Ç–∏ –ø–æ–ª—è (—ñ–º'—è —Ç–∞ email –º–∞—é—Ç—å –∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–∏—Ç–∏—Å—å)
3. –î–æ–¥–∞—Ç–∏ experience, education, skills, projects
4. –ó–±–µ—Ä–µ–≥—Ç–∏ CV

### 4. –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ CV:
1. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ –∫–Ω–æ–ø–∫—É "PDF" –∞–±–æ "DOCX"
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ª–æ–≥–∏
3. –§–∞–π–ª –º–∞—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏—Å—å

### 5. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ:
```
[CVExport] Starting export: format=pdf, cvId=...
[API] exportCV: Fetching http://localhost:8000/api/cvs/.../export/?format=pdf
[API] exportCV: Response status 200
[API] exportCV: Blob received, size=6271, type=application/pdf
[API] exportCV: Content-Disposition header: attachment; filename="My_CV_20251108.pdf"
[API] exportCV: Using filename: My_CV_20251108.pdf
[CVExport] Received blob: {size: 6271, type: "application/pdf", filename: "My_CV_20251108.pdf"}
[CVExport] Created blob URL: blob:http://...
[CVExport] Triggering download...
[CVExport] ‚úÖ Export successful!
```

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —ñ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏. –ú–æ–∂–ª–∏–≤–æ:
- –ë–ª–æ–∫—É—î—Ç—å—Å—è popup blocker
- –ü—Ä–æ–±–ª–µ–º–∞ –∑ CORS
- –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (401)

### –ü—Ä–æ–±–ª–µ–º–∞: –§–∞–π–ª –ø–æ—Ä–æ–∂–Ω—ñ–π –∞–±–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
- –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ –¥–∞–Ω—ñ CV
- –ß–∏ –Ω–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ —É backend –ª–æ–≥–∞—Ö
- –†–æ–∑–º—ñ—Ä blob (–º–∞—î –±—É—Ç–∏ > 1000 bytes)

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —ñ–º'—è —Ñ–∞–π–ª—É
**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Content-Disposition header —É Network tab –±—Ä–∞—É–∑–µ—Ä–∞

## Backward Compatibility

‚úÖ –í—Å—ñ –∑–º—ñ–Ω–∏ –∑–≤–æ—Ä–æ—Ç–Ω–æ —Å—É–º—ñ—Å–Ω—ñ:
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É (`title`, `start`, `end`, `tech`)
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É (`position`, `start_date`, `end_date`, `technologies`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è skills –∑ –º–∞—Å–∏–≤—É —Ä—è–¥–∫—ñ–≤ –≤ –º–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤

## –°—Ç–∞–Ω: ‚úÖ –ì–û–¢–û–í–û

–ï–∫—Å–ø–æ—Ä—Ç CV —Ç–µ–ø–µ—Ä –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –æ–±–æ—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ (PDF —Ç–∞ DOCX). –î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –ª–µ–≥—à–æ–≥–æ –¥–µ–±–∞–≥—ñ–Ω–≥—É –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É.

